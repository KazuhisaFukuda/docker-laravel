version: '2'
services:

### Nginx ###
    web:
      image: nginx:1.14.0-alpine
      container_name: nginx-1.14
      privileged: true
      links:
        - app
      ports:
        - "80:80"
      volumes:
        - ./web/default.conf:/etc/nginx/conf.d/default.conf

### PHP ###
    app:
      build: ./php
      container_name: php7-fpm
      privileged: true
      links:
        - db
      volumes:
        - ./src:/var/www:cached

### MySQL###
    db:
      image: mysql
      container_name: mysql8
      ports: 
        - "3036:3036"
      environment:
        - MYSQL_ROOT_PASSWORD=password
        - MYSQL_DATABASE=env-laravel-db
        - MYSQL_USER=laravel
        - MYSQL_PASSWORD=laravel
      volumes:
        - ./db/my.cnf:/etc/mysql/conf.d/my.cnf
      volumes_from:
        - data
      privileged: true

### 保存領域 ###
    data:
      image: busybox
      container_name: data-container
